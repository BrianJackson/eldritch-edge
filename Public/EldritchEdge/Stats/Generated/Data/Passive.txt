new entry "ARANEA_AGONIZING_STRIKE"
type "PassiveData"
data "DisplayName" "Agonizing Strike"
data "Description" "Agonizing Blast adds Force damage equal to your Charisma modifier to Eldritch Strike."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasPassive('AgonizingBlast', context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_ELDRITCH_STRIKE"
type "PassiveData"
data "DisplayName" "Eldritch Strike"
data "Description" "Your Eldritch power flows through your melee main hand and offhand attacks adding Force damage equal to your Charisma modifier."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);IF(HasPassive('Entangling_Spray', context.Source) and (context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_1"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 1d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"


new entry "ARANEA_POISON_STRIKE_2"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 2d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"


new entry "ARANEA_POISON_STRIKE_3"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 3d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"


new entry "PACT_OF_ZANASSU_TRAINING"
type "PassiveData"
data "DisplayName" "Pact of Zanassu Training"
data "Description" "Warlocks bound to Zanassu often favor dual shortswords as their 'fangs', a fighting style influened by the aranea of Calimshan."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Shortswords);ProficiencyBonus(Skill,Perception);ProficiencyBonus(Skill,Athletics);"

new entry "Entangling_Spray"
type "PassiveData"
data "DisplayName" "Entangling Poison Spray"
data "Description" "The Poison Spray cantrip also covers the area with relatively weak but sticky spider webs.  The primary target is cocooned with cursed webbing making it vulnerable to critical hits."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(HEX_WEB,100,2);GROUND:CreateSurface(3,3,Web)"
data "StatsFunctorContext" "OnAttack"

new entry "Spiderling_Spray"
type "PassiveData"
data "DisplayName" "Infested Webbing"
data "Description" "Cursed webbing is now crawling with hundreds of tiny spiderlings that infest the target, biting and poisoning it and potentially spreading to other targets."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(SPIDER_INFESTATION,100,2)"
data "StatsFunctorContext" "OnAttack"

new entry "Abilities_PH"
type "PassiveData"
data "DisplayName" "Nine Hells - Phelegeos Abilities"
data "Description" "Warlocks of Phelegeos practice the use of medium armor, shortswords, rapiers and scimitars."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Rapiers);Proficiency(ShortSwords);Proficiency(Scimitars);ProficiencyBonus(Skill,Arcana);"

new entry "EldritchEdge_Dueling"
type "PassiveData"
data "DisplayName" "Eldritch Edge Fighting Style"
data "Description" "When wielding a finesse weapon, adepts channel their Eldritch power raising their damage and chance to hit by their Charisma modifier."
data "DescriptionParams" "RollBonus(MeleeWeaponAttack, CharismaModifier);CharacterWeaponDamage(CharismaModifier);"
data "Boosts" "RollBonus(MeleeWeaponAttack, CharismaModifier);CharacterWeaponDamage(CharismaModifier);"
data "BoostContext" "OnEquip"

new entry "Fiery_WardPH"
type "PassiveData"
data "DisplayName" "Fiery Ward"
data "Description" "While you are burning, as a reaction, deal Charisma Modifer to any creature that hits you in melee combat.  If the creature is hexed, you heal for the same amount. On a successful save, the attacker takes no damage."
data "DescriptionParams" "DealDamage(CharismaModifier, fire);RegainHitPoints(CharismaModifier)"
data "Conditions" "IsMeleeAttack() and HasActionResource('ReactionActionPoint', 1, 0, false, context.Source) and HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('BURNING',context.Source) and FightingStyle_Dueling(context.Source)"
data "StatsFunctors" "UseActionResource(SELF, ReactionActionPoint,1);IF(not SavingThrow:(Ability.Dexterity, SourceSpellDC())):((DealDamage(CharismaModifier+Level, Necrotic);IF(HasStatus('PASSIVE_HEX',context.Target)):RegainHitPoints(CharismaModifier+Level)));"
data "StatsFunctorContext" "OnAttacked"


new entry "Obscuring_FlamePH"
type "PassiveData"
data "DisplayName" "Obscuring Flames"
data "Description" "While you are burning, flames and smoke partially obscure you, raising your AC by 1."
data "DescriptionParams" "DealDamage(CharismaModifier+Level, fire);RegainHitPoints(CharismaModifier+Level)"
data "Conditions" "FightingStyle_Dueling(context.Source);HasStatus('BURNING',context.Source)"
data "StatsFunctors" "AC(1)"
data "StatsFunctorContext" "OnAttacked"
