new entry "ARANEA_AGONIZING_STRIKE"
type "PassiveData"
data "DisplayName" "Agonizing Strike"
data "Description" "Agonizing Blast adds Force damage equal to your Charisma modifier to Eldritch Strike."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasPassive('AgonizingBlast', context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_ELDRITCH_STRIKE"
type "PassiveData"
data "DisplayName" "Eldritch Strike"
data "Description" "Your Eldritch power flows through your melee main hand and offhand attacks adding Force damage equal to your Charisma modifier."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);IF(HasPassive('Entangling_Spray', context.Source) and (context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_1"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 1d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_2"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 2d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_3"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 3d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "PACT_OF_ZANASSU_TRAINING"
type "PassiveData"
data "DisplayName" "Pact of Zanassu Training"
data "Description" "Warlocks bound to Zanassu often favor dual shortswords as their 'fangs', a fighting style influened by the aranea of Calimshan."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Shortswords);ProficiencyBonus(Skill,Perception);ProficiencyBonus(Skill,Athletics);"

new entry "Entangling_Spray"
type "PassiveData"
data "DisplayName" "Entangling Poison Spray"
data "Description" "The Poison Spray cantrip also covers the area with relatively weak but sticky spider webs.  The primary target is cocooned with cursed webbing making it vulnerable to critical hits."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(HEX_WEB,100,2);GROUND:CreateSurface(3,3,Web)"
data "StatsFunctorContext" "OnAttack"

new entry "Spiderling_Spray"
type "PassiveData"
data "DisplayName" "Infested Webbing"
data "Description" "Cursed webbing is now crawling with hundreds of tiny spiderlings that infest the target, biting and poisoning it and potentially spreading to other targets."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(SPIDER_INFESTATION,100,2)"
data "StatsFunctorContext" "OnAttack"

new entry "Zanassu_Web_Passive"
type "PassiveData"
data "DisplayName" "Web Superiority"
data "Description" "Webs are no longer considered difficult terrain and do not hinder your movement."
data "Conditions" "InSurface('SurfaceWeb')"
data "Boosts" "StatusImmunity(DIFFICULT_TERRAIN)"
data "BoostContext" "OnSurfaceEnter"

new entry "Abilities_PH"
type "PassiveData"
data "DisplayName" "Nine Hells - Phelegeos Abilities"
data "Description" "Warlocks of Phelegeos practice the use of medium armor, shortswords, rapiers and scimitars."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Rapiers);Proficiency(ShortSwords);Proficiency(Scimitars);ProficiencyBonus(Skill,Arcana);"

new entry "Obscuring_FlamePH"
type "PassiveData"
data "DisplayName" "Obscuring Flames"
data "Description" "While you are burning, flames and smoke partially obscure you, raising your AC."
data "Conditions" "HasStatus('BURNING')"
data "Boosts" "AC(1);IF(Level >= 3):AC(1);IF(Level >= 5):AC(1);"

new entry "Fire_SupremecyPH"
type "PassiveData"
data "DisplayName" "Fire Supremecy"
data "Description" "While standing in fire, you channel it into hellfire around your blade, dealing additonal fire damage with melee attacks."
data "Conditions" "InSurface('SurfaceFire')"
data "Boosts" "CharacterWeaponDamage(1d6, Fire)"
data "BoostContext" "OnSurfaceEnter"

new entry "Hand_Of_Fierna_Aura"
type "PassiveData"
data "DisplayName" "Hand of Fierna Aura"
data "Description" "Melee attackers are burned by the flames that surround you."
data "Conditions" "IsMeleeAttack() and HasActionResource('ReactionActionPoint',1,0, false,context.Source) and HasStatus('FIERNA_FLAME',context.Target)"
data "StatsFunctors" "DealDamage(1d6, Fire);UseActionResource(SELF, ReactionActionPoint,1)"
data "StatsFunctorContext" "OnAttacked"

new entry "Hand_Of_Belial_Aura"
type "PassiveData"
data "DisplayName" "Hand of Belial"
data "Description" "Melee attackers affected by your aura must make a save or become frightened."
data "Conditions" "IsMeleeAttack() and HasActionResource('ReactionActionPoint',1,0, false,context.Source) and HasStatus('BELIAL_FLAME',context.Target) and not SavingThrow(Ability.Wisdom, SourceSpellDC())"
data "StatsFunctors" "ApplyStatus(FRIGHTENED,100,2);UseActionResource(SELF, ReactionActionPoint,1)"
data "StatsFunctorContext" "OnAttacked"

new entry "Osyluths_Backdraft"
type "PassiveData"
data "DisplayName" "Backdraft"
data "Description" "The Agonizing Blast Invocation now adds Charima modifier Force to Hand Of Osyluths."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and SpellId('Zone_Hand_Of_Osyluths') and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "DealDamage(CharismaModifier,Fire);"
data "StatsFunctorContext" "OnAttack"

new entry "Osyluths_Blast_Wave"
type "PassiveData"
data "DisplayName" "Blast Wave"
data "Description" "The Repelling Blast Invocation combined with Agonizing Blast adds a chance for Hand Of Osyluths to knock enemies prone."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and SpellId('Zone_Hand_Of_Osyluths') and not FightingStyle_GreatWeapon(context.Source) and HasPassive('AgonizingBlast', context.Source) and HasPassive('RepellingBlast',context.Source)"
data "StatsFunctors" "ApplyStatus(PRONE,100,1, , , ,not SavingThrow(Ability.Strength, SourceSpellDC()));"
data "StatsFunctorContext" "OnAttack"

new entry "Fiery_WardPH"
type "PassiveData"
data "DisplayName" "Fiery Retort"
data "Description" "!!CUT!! While you are burning, as a reaction, deal Charisma Modifer to any creature that hits you in melee combat.  If the creature is hexed, you heal for the same amount. On a successful save, the attacker takes no damage."
data "DescriptionParams" "DealDamage(CharismaModifier, fire);RegainHitPoints(CharismaModifier)"
data "Conditions" "IsMeleeAttack() and HasActionResource('ReactionActionPoint', 1, 0, false, context.Source) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "UseActionResource(SELF, ReactionActionPoint,1);IF(not SavingThrow:(Ability.Dexterity, SourceSpellDC())):((DealDamage(CharismaModifier+Level, Fire);IF(HasStatus('PASSIVE_HEX',context.Target)):RegainHitPoints(CharismaModifier+Level)));"
data "StatsFunctorContext" "OnAttacked"
