new entry "ARANEA_AGONIZING_STRIKE"
type "PassiveData"
data "DisplayName" "Agonizing Strike"
data "Description" "Agonizing Blast adds Force damage equal to your Charisma modifier to Eldritch Strike."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasPassive('AgonizingBlast', context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_ELDRITCH_STRIKE"
type "PassiveData"
data "DisplayName" "Eldritch Strike"
data "Description" "Your Eldritch power flows through your melee main hand and offhand attacks adding Force damage equal to your Charisma modifier."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);IF(HasPassive('Entangling_Spray', context.Source) and (context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(max(0,CharismaModifier),Force);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_1"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 1d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_2"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 2d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "ARANEA_POISON_STRIKE_3"
type "PassiveData"
data "DisplayName" "Spider Venom"
data "Description" "While Aranea Aspect is active, Eldritch Strike also deals 3d4 poison damage."
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and HasStatus('ARANEA_POISON',context.Source) and not FightingStyle_GreatWeapon(context.Source)"
data "StatsFunctors" "IF(context.HitDescription.AttackType==AttackType.MeleeWeaponAttack or context.HitDescription.AttackType==AttackType.MeleeOffHandWeaponAttack):DealDamage(1d4,Poison);"
data "StatsFunctorContext" "OnAttack"

new entry "PACT_OF_ZANASSU_TRAINING"
type "PassiveData"
data "DisplayName" "Pact of Zanassu Training"
data "Description" "Warlocks bound to Zanassu often favor dual shortswords as their 'fangs', a fighting style influened by the aranea of Calimshan."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Shortswords);ProficiencyBonus(Skill,Perception);ProficiencyBonus(Skill,Athletics);"

new entry "Entangling_Spray"
type "PassiveData"
data "DisplayName" "Entangling Poison Spray"
data "Description" "The Poison Spray cantrip also covers the area with relatively weak but sticky spider webs.  The primary target is cocooned with cursed webbing making it vulnerable to critical hits."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(HEX_WEB,100,2);GROUND:CreateSurface(3,3,Web)"
data "StatsFunctorContext" "OnAttack"

new entry "Spiderling_Spray"
type "PassiveData"
data "DisplayName" "Infested Webbing"
data "Description" "Cursed webbing is now crawling with hundreds of tiny spiderlings that infest the target, biting and poisoning it and potentially spreading to other targets."
data "Conditions" "SpellId('Projectile_PoisonSpray') and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(SPIDER_INFESTATION,100,2)"
data "StatsFunctorContext" "OnAttack"

new entry "Zanassu_Web_Passive"
type "PassiveData"
data "DisplayName" "Web Walker"
data "Description" "Webs are no longer considered difficult terrain and do not hinder your movement."
data "Conditions" "InSurface('SurfaceWeb')"
data "Boosts" "StatusImmunity(DIFFICULT_TERRAIN)"
data "BoostContext" "OnMoveStartedInCombat"

new entry "Abilities_PH"
type "PassiveData"
data "DisplayName" "Nine Hells - Phelegeos Abilities"
data "Description" "Warlocks of Phelegeos practice the use of medium armor, shortswords, rapiers and scimitars."
data "Boosts" "Proficiency(MediumArmor);Proficiency(Rapiers);Proficiency(ShortSwords);Proficiency(Scimitars);ProficiencyBonus(Skill,Arcana);"

new entry "Obscuring_FlamePH"
type "PassiveData"
data "DisplayName" "Obscuring Flames"
data "Description" "While surrounded by fire, you warp the flames and smoke to partially obscure yourself.  Attackers have disadvantage on attack rolls against you."
data "StatsFunctors" "IF(FightingStyle_Dueling(context.Source) and (InSurface('SurfaceFire') or HasStatus('BURNING'))):ApplyStatus(SELF,OBSCURING_FLAMES,100,2)"
data "StatsFunctorContext" "OnMoveStartedInCombat"

new entry "Fierna_Backdraft"
type "PassiveData"
data "DisplayName" "Backdraft"
data "Description" "The intense power of Hand of Fierna causes a backdraft that potentially sets you on fire."
data "Conditions" "SpellId('Zone_Hand_Of_Fierna')"
data "StatsFunctors" "ApplyStatus(SELF, BURNING, 100, 1)"
data "StatsFunctorContext" "OnAttack"

new entry "Belial_Agonizing"
type "PassiveData"
data "DisplayName" "Belial's Agony"
data "Description" "The Agonizing Blast Invocation now adds Charima modifier Necrotic damage to your melee attacks."
data "Conditions" "FightingStyle_Dueling(context.Source) and HasDamageEffectFlag(DamageFlags.Hit) and HasPassive('AgonizingBlast',context.Source) and context.HitDescription.AttackType==AttackType.MeleeWeaponAttack"
data "StatsFunctors" "DealDamage(max(1,CharismaModifier),Necrotic);"
data "StatsFunctorContext" "OnAttack"

new entry "Fierna_BlastWave"
type "PassiveData"
data "DisplayName" "Blast Wave"
data "Description" "The Repelling Blast Invocation adds a chance for Hand of Fierna to knock enemies prone."
data "Conditions" "SpellId('Zone_Hand_Of_Fierna') and HasPassive('RepellingBlast',context.Source)"
data "StatsFunctors" "ApplyStatus(PRONE,100,1, , , ,not SavingThrow(Ability.Strength, SourceSpellDC()));"
data "StatsFunctorContext" "OnAttack"

new entry "Hand_Of_Fierna_Aura"
type "PassiveData"
data "DisplayName" "Hand of Fierna Aura"
data "Description" "Melee attackers are burned by the flames that surround you."
data "Conditions" "FightingStyle_Dueling(context.Source) and IsMeleeAttack() and HasActionResource('ReactionActionPoint',1,0, false,context.Source) and HasStatus('FIERNA_FLAME',context.Target)"
data "StatsFunctors" "DealDamage(1d6, Fire);UseActionResource(SELF, ReactionActionPoint,1)"
data "StatsFunctorContext" "OnAttacked"

new entry "Hand_Of_Belial_Aura"
type "PassiveData"
data "DisplayName" "Hand of Belial"
data "Description" "Melee attackers affected by your aura must make a save or become frightened."
data "Conditions" "FightingStyle_Dueling(context.Source) and IsMeleeAttack() and HasActionResource('ReactionActionPoint',1,0, false,context.Source) and HasStatus('BELIAL_FLAME',context.Target) and not SavingThrow(Ability.Wisdom, SourceSpellDC())"
data "StatsFunctors" "ApplyStatus(FRIGHTENED,100,2);UseActionResource(SELF, ReactionActionPoint,1)"
data "StatsFunctorContext" "OnAttacked"